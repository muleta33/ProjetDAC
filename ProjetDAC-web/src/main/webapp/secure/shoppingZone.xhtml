<ui:composition template="../layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"   
    xmlns:p="http://primefaces.org/ui"   
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"     
    xmlns:f="http://xmlns.jcp.org/jsf/core">
    
    <ui:define name="content">
        <h:form id="form">
            <p:ring id="custom" value="#{listAllPerfumeFeatures.perfumes}" var="perfume" >
                <p:outputPanel style="text-align: center;" layout="block">
                    #{perfume.name}
                    <br />
                    <p:commandButton update=":form:perfumeDetail" icon="ui-icon-search" title="Détails" oncomplete="PF('perfumeDialog').show();">
                        <f:setPropertyActionListener value="#{perfume}" target="#{shoppingZoneBean.selectedPerfume}" />
                    </p:commandButton>
                </p:outputPanel>
            </p:ring>

            <p:dialog header="Détails du parfum" widgetVar="perfumeDialog" showEffect="fade" hideEffect="fade" resizable="false" >
                <p:outputPanel id="perfumeDetail" layout="block">
                    <p:panelGrid rendered="#{not empty shoppingZoneBean.selectedPerfume}" columnClasses="value">

                        <p:row>
                            <p:column>
                                <h:outputText value="Senteurs : " />
                            </p:column>
                            <p:column>
                                <ul>
                                    <ui:repeat value="#{shoppingZoneBean.selectedPerfume.fragances}" var="fragance">
                                        <li><h:outputText value="#{fragance.name}"/></li>
                                    </ui:repeat> 
                                </ul>
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column>
                                <h:outputText value="Intensité : " />
                            </p:column>
                            <p:column>
                                <h:outputText value="Eau de parfum" rendered="#{shoppingZoneBean.selectedPerfume.intensity == 3}" />
                                <h:outputText value="Eau de toilette" rendered="#{shoppingZoneBean.selectedPerfume.intensity == 2}" />
                                <h:outputText value="Eau fraîche" rendered="#{shoppingZoneBean.selectedPerfume.intensity == 1}" />
                                <h:outputText value="Eau tendre" rendered="#{shoppingZoneBean.selectedPerfume.intensity == 0}" />
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column>
                                <h:outputText value="Flacon : " />
                            </p:column>
                            <p:column>
                                <h:outputText value="#{shoppingZoneBean.selectedPerfume.bottle.type.name}" />
                            </p:column>
                        </p:row>

                    </p:panelGrid>
                </p:outputPanel>
            </p:dialog>
        </h:form>
    </ui:define>
</ui:composition>

